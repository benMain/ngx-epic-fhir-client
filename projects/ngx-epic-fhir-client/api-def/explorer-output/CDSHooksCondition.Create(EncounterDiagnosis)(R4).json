{"Id":1058,"Description":"<p>This web service adds encounter diagnoses to a patient's chart. This web service is currently designed only for use with CDS Hooks integrations and should not be used for other purposes. See <a href=\"https://open.epic.com/Interface/FHIR#CDSHooks\">Epic's CDS Hooks specification</a> for more information on creating an integration that utilizes CDS Hooks.</p>","Namespace":"","WsdlFile":"","HttpMethod":"","UrlTemplate":"","SampleRequest":"{\n  \"hookInstance\": \"e5abb534-ebdd-11eb-9b60-0050568b7be6\",\n  \"fhirServer\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4\",\n  \"hook\": \"patient-view\",\n  \"fhirAuthorization\": {\n    \"access_token\": \"&lt;opaque access token&gt;\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 3600,\n    \"scope\": \"user/Condition.Read user/Condition.Write user/Patient.Read user/Practitioner.Read user/PractitionerRole.Read\",\n    \"subject\": \"&lt;your client_id&gt;\"\n  },\n  \"context\": {\n    \"patientId\": \"eZ5-7rYdWqgv3jSgIvx.SPw3\",\n    \"encounterId\": \"eUNhr0pVHo.9Lau9LJJbgHQ3\",\n    \"userId\": \"Practitioner/evNp-KhYwOOqAZn1pZ2enuA3\"\n  },\n  \"prefetch\": {\n    \"problems\": {\n      \"resourceType\": \"Bundle\",\n      \"type\": \"searchset\",\n      \"total\": 2,\n      \"link\": [\n        {\n          \"relation\": \"self\",\n          \"url\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition?patient=eZ5-7rYdWqgv3jSgIvx.SPw3&amp;clinical-status=active&amp;category=problem-list-item\"\n        }\n      ],\n      \"entry\": [\n        {\n          \"link\": [\n            {\n              \"relation\": \"self\",\n              \"url\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition/eBUgclBp0IO8k6haU7cfXGg3\"\n            }\n          ],\n          \"fullUrl\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition/eBUgclBp0IO8k6haU7cfXGg3\",\n          \"resource\": {\n            \"resourceType\": \"Condition\",\n            \"id\": \"eBUgclBp0IO8k6haU7cfXGg3\",\n            \"clinicalStatus\": {\n              \"coding\": [\n                {\n                  \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\",\n                  \"version\": \"4.0.0\",\n                  \"code\": \"active\",\n                  \"display\": \"Active\"\n                }\n              ],\n              \"text\": \"Active\"\n            },\n            \"verificationStatus\": {\n              \"coding\": [\n                {\n                  \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\",\n                  \"version\": \"4.0.0\",\n                  \"code\": \"confirmed\",\n                  \"display\": \"Confirmed\"\n                }\n              ],\n              \"text\": \"Confirmed\"\n            },\n            \"category\": [\n              {\n                \"coding\": [\n                  {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\",\n                    \"code\": \"problem-list-item\",\n                    \"display\": \"Problem List Item\"\n                  }\n                ],\n                \"text\": \"Problem List Item\"\n              }\n            ],\n            \"code\": {\n              \"coding\": [\n                {\n                  \"system\": \"urn:oid:2.16.840.1.113883.6.90\",\n                  \"code\": \"E03.9\"\n                },\n                {\n                  \"system\": \"urn:oid:2.16.840.1.113883.6.96\",\n                  \"code\": \"40930008\"\n                }\n              ],\n              \"text\": \"Hypothyroidism\"\n            },\n            \"subject\": {\n              \"reference\": \"Patient/eZ5-7rYdWqgv3jSgIvx.SPw3\",\n              \"display\": \"Ambulatory, Oliver\"\n            },\n            \"onsetPeriod\": {\n              \"start\": \"2008-04-17\",\n              \"end\": \"2008-04-17\"\n            },\n            \"recordedDate\": \"2008-04-17\"\n          },\n          \"search\": {\n            \"mode\": \"match\"\n          }\n        },\n        {\n          \"link\": [\n            {\n              \"relation\": \"self\",\n              \"url\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition/e0lOm4N9POJvVqbipHCSBrw3\"\n            }\n          ],\n          \"fullUrl\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition/e0lOm4N9POJvVqbipHCSBrw3\",\n          \"resource\": {\n            \"resourceType\": \"Condition\",\n            \"id\": \"e0lOm4N9POJvVqbipHCSBrw3\",\n            \"clinicalStatus\": {\n              \"coding\": [\n                {\n                  \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\",\n                  \"version\": \"4.0.0\",\n                  \"code\": \"active\",\n                  \"display\": \"Active\"\n                }\n              ],\n              \"text\": \"Active\"\n            },\n            \"verificationStatus\": {\n              \"coding\": [\n                {\n                  \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\",\n                  \"version\": \"4.0.0\",\n                  \"code\": \"confirmed\",\n                  \"display\": \"Confirmed\"\n                }\n              ],\n              \"text\": \"Confirmed\"\n            },\n            \"category\": [\n              {\n                \"coding\": [\n                  {\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\",\n                    \"code\": \"problem-list-item\",\n                    \"display\": \"Problem List Item\"\n                  }\n                ],\n                \"text\": \"Problem List Item\"\n              }\n            ],\n            \"code\": {\n              \"coding\": [\n                {\n                  \"system\": \"urn:oid:2.16.840.1.113883.6.90\",\n                  \"code\": \"E78.00\"\n                },\n                {\n                  \"system\": \"urn:oid:2.16.840.1.113883.6.96\",\n                  \"code\": \"13644009\"\n                }\n              ],\n              \"text\": \"Hypercholesterolemia\"\n            },\n            \"subject\": {\n              \"reference\": \"Patient/eZ5-7rYdWqgv3jSgIvx.SPw3\",\n              \"display\": \"Ambulatory, Oliver\"\n            },\n            \"onsetPeriod\": {\n              \"start\": \"2010-12-23\",\n              \"end\": \"2010-12-23\"\n            },\n            \"recordedDate\": \"2010-12-23\"\n          },\n          \"search\": {\n            \"mode\": \"match\"\n          }\n        }\n      ]\n    },\n    \"encounterDx\": {\n      \"resourceType\": \"Bundle\",\n      \"type\": \"searchset\",\n      \"total\": 0,\n      \"link\": [\n        {\n          \"relation\": \"self\",\n          \"url\": \"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4/Condition?patient=eZ5-7rYdWqgv3jSgIvx.SPw3&amp;category=encounter-diagnosis&amp;encounter=eUNhr0pVHo.9Lau9LJJbgHQ3\"\n        }\n      ],\n      \"entry\": [\n        {\n          \"resource\": {\n            \"resourceType\": \"OperationOutcome\",\n            \"issue\": [\n              {\n                \"severity\": \"warning\",\n                \"code\": \"processing\",\n                \"details\": {\n                  \"coding\": [\n                    {\n                      \"system\": \"urn:oid:1.2.840.114350.1.13.0.1.7.2.657369\",\n                      \"code\": \"4101\",\n                      \"display\": \"Resource request returns no results.\"\n                    }\n                  ],\n                  \"text\": \"Resource request returns no results.\"\n                }\n              }\n            ]\n          },\n          \"search\": {\n            \"mode\": \"outcome\"\n          }\n        }\n      ]\n    }\n  },\n  \"extension\": {\n    \"com.epic.cdshooks.request.bpa-trigger-action\": \"92\",\n    \"com.epic.cdshooks.request.cds-hooks-specification-version\": \"1.0\",\n    \"com.epic.cdshooks.request.fhir-version\": \"R4\",\n    \"com.epic.cdshooks.request.criteria-id\": \"335\",\n    \"com.epic.cdshooks.request.epic-version\": \"9.7\",\n    \"com.epic.cdshooks.request.cds-hooks-implementation-version\": \"1.1\",\n    \"com.epic.cdshooks.request.cds-hooks-su-version\": \"0\",\n    \"internal.epic.cdshooks.request.epic-emp-id\": \"10000\"\n  }\n}","SampleResponse":"{\n    \"cards\": [{\n            \"detail\": \"Other primary thrombophilia not documented as an encounter diagnosis. Consider adding it to the chart (and optionally the problem list).\",\n            \"indicator\": \"warning\",\n            \"links\": [{\n                    \"appContext\": \"e5abb534-ebdd-11eb-9b60-0050568b7be6 (or any other string)\",\n                    \"label\": \"Test Smart App Link\",\n                    \"type\": \"smart\",\n                    \"url\": \"https://test.smartapp.com/launch\"\n                }\n            ],\n            \"selectionBehavior\": \"any\",\n            \"source\": {\n                \"label\": \"Other primary thrombophilia screening service\"\n            },\n            \"suggestions\": [{\n                    \"label\": \"Add Other primary thrombophilia as encounter Dx [D68.59]\",\n                    \"actions\": [{\n                            \"description\": \"Add Other primary thrombophilia as encounter Dx [D68.59]\",\n                            \"resource\": {\n                                \"category\": [{\n                                        \"coding\": [{\n                                                \"code\": \"encounter-diagnosis\",\n                                                \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                            }\n                                        ],\n                                        \"text\": \"Encounter Diagnosis\"\n                                    }\n                                ],\n                                \"code\": {\n                                    \"coding\": [{\n                                            \"code\": \"D68.59\",\n                                            \"system\": \"urn:oid:2.16.840.1.113883.6.90\"\n                                        }\n                                    ],\n                                    \"text\": \"Other primary thrombophilia\"\n                                },\n                                \"subject\": {\n                                    \"reference\": \"Patient/eZ5-7rYdWqgv3jSgIvx.SPw3\"\n                                },\n                                \"resourceType\": \"Condition\",\n                                \"encounter\": {\n                                    \"reference\": \"Encounter/eUNhr0pVHo.9Lau9LJJbgHQ3\"\n                                }\n                            },\n                            \"type\": \"create\"\n                        }\n                    ],\n                    \"isRecommended\": true,\n                    \"uuid\": \"&lt;your uuid&gt;\"\n                }\n            ]\n        }\n    ]\n}","Remarks":"The example request was constructed with the following prefetch template:\n<pre>{\n  \"problems\":\"Condition?patient={{context.patientId}}&clinical-status=active&category=problem-list-item\",\n  \"encounterDx\":\"Condition?patient={{context.patientId}}&category=encounter-diagnosis&encounter={{context.encounterId}}\"\n}</pre>\n\nNotice that the \"encounterDx\" prefetch value in the sample request has a bundle with no matches, since this patient had no encounter diagnoses documented when the service was invoked.","Errors":[],"ChangeLog":null,"ImportSections":{"-1":[{"Id":1,"Type":808,"Name":null,"Content":null,"XType":null,"Opt":null,"Unb":null,"RelId":null},{"Id":2,"Type":809,"Name":null,"Content":null,"XType":null,"Opt":null,"Unb":null,"RelId":null}]},"Parameters":null,"Banners":[],"Success":true,"Message":null}